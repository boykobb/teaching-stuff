% По зададено число функцията accgen образува функция-акумулатор, помнеща това число.
% Всяка функция-акумулатор също има за аргумент число. Тя заменя запомненото число със сбора
% от него и аргумента си и дава този сбор като резултат от изпълнението си (на върха на стека).
% Така всяка функция-акумулатор бива създавана със запомнена начална стойност, която тя при
% всяко повикване изменя и дава като свой резултат.

/accgen {       % n -> (n -> n)
  {null null 3 -1 roll add dup 3 1 roll 1 exch put}
  13 array copy
  dup dup 0 exch put
  dup 3 -1 roll 1 exch put
  cvx
} def

% Примери

/f  10 accgen def  % акумулатор със запомнено 10
/g 100 accgen def  % акумулатор със запомнено 100

 1 f =   % отпечатва 11
 3 f =   % отпечатва 14
 5 g =   % отпечатва 105
 7 f =   % отпечатва 21
50 g =   % отпечатва 155

quit
